@model List<ORT_PORTAL_ABOGADOS.Models.Consulta>

@{
    ViewData["Title"] = "Solicitudes Pendientes";
}

</header>
<h2 style="color: black; margin-top: 50px">Solicitudes Pendientes</h2>

<table class="table">
    <thead>
        <tr>
            <th>Consulta N#</th>
            <th>Descripción</th>
            <th>Nombre Cliente</th>
            <th>Mail Cliente</th>
            <th>Definir Precio</th>
            <th>Aceptar</th>
            <th>Ocultar (Temporalmente)</th>
        </tr>
    </thead>
    <tbody>
        @{
            var contadorConsultas = 0;

            @foreach (var consulta in Model)
            {
                contadorConsultas++;
                <tr class="solicitud">
                    <td>@contadorConsultas</td>
                    <td><textarea readonly id="campoDescp">@consulta.Descripcion</textarea></td>
                    <td>@consulta.NombreCliente, @consulta.ApellidoCliente</td>
                    <td>@consulta.MailCliente</td>
                    <td>
                        <form asp-controller="Consultas" asp-action="SetPrecio" method="post" class="form-precio" data-id="@consulta.Id">
                            <input type="hidden" name="consultaId" value="@consulta.Id" />
                            <input type="number" min="1" name="precio" class="campo" placeholder="Precio" required>
                            <button type="submit" class="login-btn btn-precio">Ingresar</button>
                        </form>
                    </td>
                    <td>
                        <form asp-controller="Consultas" asp-action="AceptarSolicitud" method="post" class="form-aceptar" style="display:none">
                            <input type="hidden" name="id" value="@consulta.Id" />
                            <input type="hidden" name="precio" class="input-precio-hidden" />
                            <button type="submit" class="btn-aceptar">Aceptar Solicitud</button>
                        </form>
                    </td>
                    <td>
                        <button class="ocultar btn-rechazar">Ocultar Solicitud</button>
                    </td>
                </tr>
            }
        }
        
    </tbody>
</table>
